<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillHive - Share Skills, Earn Credits</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #3b82f6;
            --light-blue: #dbeafe;
            --primary-yellow: #fbbf24;
            --light-yellow: #fef3c7;
            --dark-blue: #1e40af;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --white: #ffffff;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, var(--light-blue) 0%, var(--light-yellow) 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Login Page */
        .login-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-yellow) 100%);
        }

        .login-container {
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--white);
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .login-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-subtitle {
            color: var(--text-light);
            margin-bottom: 30px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-control.error {
            border-color: var(--error);
        }

        .error-message {
            color: var(--error);
            font-size: 13px;
            margin-top: 5px;
        }

        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: var(--white);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }

        .btn-google {
            background: var(--white);
            color: var(--text-dark);
            border: 2px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .btn-google:hover {
            background: var(--gray-100);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        .divider {
            margin: 25px 0;
            text-align: center;
            position: relative;
            color: var(--text-light);
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gray-200);
            z-index: 0;
        }

        .divider span {
            background: var(--white);
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }

        .signup-form {
            display: none;
        }

        /* Main App */
        .main-app {
            display: none;
        }

        .header {
            background: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .nav-logo .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 18px;
        }

        .nav-tabs {
            display: flex;
            background: var(--gray-100);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .nav-tab {
            padding: 12px 20px;
            text-align: center;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 14px;
        }

        .nav-tab:hover {
            background: var(--gray-200);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-yellow));
            color: var(--white);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .credits {
            background: linear-gradient(135deg, var(--primary-yellow), #f59e0b);
            color: var(--white);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .credits:hover {
            transform: scale(1.05);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .logout-btn {
            padding: 8px;
            border: none;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            color: var(--white);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        /* Page Content */
        .page-content {
            padding: 40px 0;
            min-height: calc(100vh - 100px);
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .page-title {
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-subtitle {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 40px;
            font-size: 18px;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }

        .skill-card {
            border-left: 4px solid var(--primary-blue);
        }

        .skill-card h3 {
            color: var(--primary-blue);
            margin-bottom: 10px;
            font-size: 20px;
        }

        .skill-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .skill-price {
            font-weight: bold;
            color: var(--success);
            font-size: 18px;
        }

        .skill-rating {
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }

        .tag {
            background: var(--light-blue);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            color: var(--primary-blue);
            font-weight: 500;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
        }

        .btn-outline:hover {
            background: var(--primary-blue);
            color: var(--white);
            transform: translateY(-1px);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            border: 2px dashed var(--gray-200);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: var(--gray-100);
        }

        .file-upload:hover {
            border-color: var(--primary-blue);
            background: var(--light-blue);
        }

        .file-upload input[type="file"] {
            display: none;
        }

        /* Video Options */
        .video-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .video-option {
            padding: 20px;
            border: 2px solid var(--gray-200);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .video-option:hover {
            border-color: var(--primary-blue);
            background: var(--light-blue);
            transform: translateY(-2px);
        }

        .video-option.selected {
            border-color: var(--primary-blue);
            background: var(--light-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .video-option i {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-blue);
        }

        /* Session Cards */
        .session-card {
            border-left: 4px solid var(--success);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1));
        }

        .session-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 10px;
        }

        .status-upcoming {
            background: var(--primary-blue);
        }

        .status-completed {
            background: var(--success);
        }

        /* Career Analysis */
        .analysis-card {
            background: linear-gradient(135deg, var(--light-blue), var(--light-yellow));
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .skill-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .skill-category {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .skill-category.excellent {
            border-left: 4px solid var(--success);
        }

        .skill-category.needs-improvement {
            border-left: 4px solid var(--warning);
        }

        .skill-category.learn-immediately {
            border-left: 4px solid var(--error);
        }

        .skill-list {
            list-style: none;
            margin-top: 10px;
        }

        .skill-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .skill-list li:last-child {
            border-bottom: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: 20px;
            padding: 35px;
            width: 90%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: modalPop 0.3s ease-out;
        }

        @keyframes modalPop {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.2s ease;
        }

        .modal-close:hover {
            color: var(--error);
        }

        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .payment-option {
            padding: 20px;
            border: 2px solid var(--gray-200);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .payment-option:hover {
            border-color: var(--primary-blue);
            background: var(--light-blue);
            transform: translateY(-2px);
        }

        .payment-option.selected {
            border-color: var(--primary-blue);
            background: var(--light-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .payment-option i {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--primary-blue);
        }

        /* Video Call Interface */
        .video-container {
            background: #000;
            border-radius: 15px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 18px;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .video-feed {
            position: absolute;
            border: 2px solid var(--white);
            border-radius: 10px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 12px;
        }

        .local-video {
            top: 15px;
            right: 15px;
            width: 120px;
            height: 80px;
            background: var(--primary-blue);
        }

        .remote-video {
            bottom: 15px;
            left: 15px;
            width: 150px;
            height: 100px;
            background: #555;
        }

        .video-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.2s ease;
        }

        .control-btn.mute {
            background: var(--error);
            color: var(--white);
        }

        .control-btn.active {
            background: var(--success);
            color: var(--white);
        }

        .control-btn.inactive {
            background: var(--gray-200);
            color: var(--text-dark);
        }

        .control-btn:hover {
            transform: scale(1.1);
        }

        /* Floating Action Button */
        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
            color: var(--white);
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .floating-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px;
            text-decoration: none;
            color: var(--text-light);
            transition: color 0.3s ease;
            font-size: 12px;
        }

        .mobile-nav-item.active {
            color: var(--primary-blue);
        }

        .mobile-nav-item i {
            font-size: 18px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }

            .nav-tabs {
                display: none;
            }

            .mobile-nav {
                display: block;
            }

            .page-content {
                padding-bottom: 100px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .skill-analysis {
                grid-template-columns: 1fr;
            }

            .payment-options {
                grid-template-columns: 1fr;
            }

            .nav {
                flex-wrap: wrap;
                gap: 10px;
            }

            .user-info {
                order: 3;
                width: 100%;
                justify-content: center;
                margin-top: 15px;
            }

            .video-options {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                padding: 25px;
            }

            .login-container {
                padding: 30px;
                margin: 15px;
            }

            .floating-btn {
                bottom: 100px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }

        /* Animations */
        .fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Loading States */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--gray-200);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="logo">SH</div>
            <h1 class="login-title">SkillHive</h1>
            <p class="login-subtitle">Empower Your Learning. Share Your Expertise.</p>

            <!-- Login Form -->
            <div id="loginForm">
                <button class="btn btn-google" onclick="signInWithGoogle()">
                    <svg width="18" height="18" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Continue with Google
                </button>

                <div class="divider"><span>or</span></div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email">
                    <div class="error-message" id="emailError"></div>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password">
                    <div class="error-message" id="passwordError"></div>
                </div>

                <button class="btn btn-primary" onclick="handleLogin()">Sign In</button>

                <p style="margin-top: 20px; color: var(--text-light); text-align: center;">
                    Don't have an account? <a href="#" onclick="showSignUp()" style="color: var(--primary-blue); text-decoration: none;">Sign Up</a>
                </p>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="signup-form">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" class="form-control" placeholder="Enter your full name">
                    <div class="error-message" id="nameError"></div>
                </div>

                <div class="form-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" class="form-control" placeholder="Choose a username">
                    <div class="error-message" id="usernameError"></div>
                </div>

                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" class="form-control" placeholder="Enter your email">
                    <div class="error-message" id="signupEmailError"></div>
                </div>

                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" class="form-control" placeholder="Create a password (min 6 characters)">
                    <div class="error-message" id="signupPasswordError"></div>
                </div>

                <button class="btn btn-primary" onclick="handleSignup()">Sign Up</button>

                <p style="margin-top: 20px; color: var(--text-light); text-align: center;">
                    Already have an account? <a href="#" onclick="showLogin()" style="color: var(--primary-blue); text-decoration: none;">Sign In</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="main-app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <nav class="nav">
                    <div class="nav-logo">
                        <div class="logo-icon">SH</div>
                        SkillHive
                    </div>
                    <div class="nav-tabs">
                        <a href="#" class="nav-tab active" onclick="showSection('dashboard')">Dashboard</a>
                        <a href="#" class="nav-tab" onclick="showSection('learn')">Learn</a>
                        <a href="#" class="nav-tab" onclick="showSection('teach')">Teach</a>
                        <a href="#" class="nav-tab" onclick="showSection('sessions')">Sessions</a>
                        <a href="#" class="nav-tab" onclick="showSection('career')">Career</a>
                    </div>
                    <div class="user-info">
                        <div class="credits" onclick="showPaymentModal()">
                            <i class="fas fa-coins"></i> <span id="userCredits">0</span> Credits
                        </div>
                        <div class="user-avatar" id="userAvatar">U</div>
                        <button class="logout-btn" onclick="logout()" title="Logout">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Page Content -->
        <main class="page-content">
            <div class="container">
                <!-- Dashboard Section -->
                <section id="dashboard" class="page-section active fadeIn">
                    <h1 class="page-title">Welcome to SkillHive</h1>
                    <p class="page-subtitle">Your gateway to unlimited skill sharing and learning</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="card">
                            <h3><i class="fas fa-graduation-cap"></i> Learn New Skills</h3>
                            <p>Browse thousands of skills taught by experts worldwide. From programming to cooking, find your passion.</p>
                            <button class="btn btn-primary" onclick="showSection('learn')">Explore Skills</button>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-chalkboard-teacher"></i> Teach & Earn</h3>
                            <p>Share your expertise with others and earn credits. Turn your knowledge into rewards.</p>
                            <button class="btn btn-primary" onclick="showSection('teach')">Start Teaching</button>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-briefcase"></i> Career Growth</h3>
                            <p>Analyze job requirements and get personalized skill recommendations for your career goals.</p>
                            <button class="btn btn-primary" onclick="showSection('career')">Analyze Career</button>
                        </div>
                        <div class="card">
                            <h3><i class="fas fa-video"></i> Video Learning</h3>
                            <p>Join live one-on-one sessions with built-in video calls or use your preferred platform.</p>
                            <button class="btn btn-primary" onclick="showSection('sessions')">My Sessions</button>
                        </div>
                    </div>

                    <div style="margin-top: 40px;">
                        <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-dark);">Featured Skills</h2>
                        <div id="featuredSkills" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                            <!-- Featured skills will be loaded here -->
                        </div>
                    </div>
                </section>

                <!-- Learn Section -->
                <section id="learn" class="page-section">
                    <h1 class="page-title">Learn Skills</h1>
                    <p class="page-subtitle">Discover and book one-on-one learning sessions</p>

                    <div class="card">
                        <h3><i class="fas fa-search"></i> Find Your Perfect Skill</h3>
                        <div class="form-row">
                            <input type="text" class="form-control" placeholder="Search skills..." id="skillSearch" onkeyup="filterSkills()">
                            <select class="form-control" id="categoryFilter" onchange="filterSkills()">
                                <option value="">All Categories</option>
                                <option value="programming">Programming</option>
                                <option value="design">Design</option>
                                <option value="business">Business</option>
                                <option value="marketing">Marketing</option>
                                <option value="music">Music</option>
                                <option value="language">Languages</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <select class="form-control" id="priceFilter" onchange="filterSkills()">
                                <option value="">All Prices</option>
                                <option value="0-20">0-20 Credits</option>
                                <option value="21-50">21-50 Credits</option>
                                <option value="51-100">51+ Credits</option>
                            </select>
                            <select class="form-control" id="sortBy" onchange="filterSkills()">
                                <option value="rating">Sort by Rating</option>
                                <option value="price">Sort by Price</option>
                                <option value="recent">Most Recent</option>
                            </select>
                        </div>
                    </div>

                    <div id="skillsList">
                        <!-- Skills will be populated here -->
                    </div>
                </section>

                <!-- Teach Section -->
                <section id="teach" class="page-section">
                    <h1 class="page-title">Teach & Earn</h1>
                    <p class="page-subtitle">Share your expertise and earn credits</p>

                    <div class="card">
                        <h3><i class="fas fa-plus-circle"></i> Create New Skill Session</h3>
                        <form id="teachForm" onsubmit="createSkillSession(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Skill Title</label>
                                    <input type="text" id="skillTitle" class="form-control" placeholder="e.g., JavaScript Fundamentals" required>
                                </div>
                                <div class="form-group">
                                    <label>Category</label>
                                    <select id="skillCategory" class="form-control" required>
                                        <option value="">Select Category</option>
                                        <option value="programming">Programming</option>
                                        <option value="design">Design</option>
                                        <option value="business">Business</option>
                                        <option value="marketing">Marketing</option>
                                        <option value="music">Music</option>
                                        <option value="language">Languages</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Description</label>
                                <textarea id="skillDescription" class="form-control textarea" placeholder="Describe what you'll teach and what students will learn..." required></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Credits Required</label>
                                    <input type="number" id="skillCredits" class="form-control" min="1" placeholder="25" required>
                                </div>
                                <div class="form-group">
                                    <label>Session Duration (Hours)</label>
                                    <input type="number" id="skillDuration" class="form-control" min="0.5" max="8" step="0.5" placeholder="2" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Tags (comma separated)</label>
                                <input type="text" id="skillTags" class="form-control" placeholder="javascript, coding, web development">
                            </div>

                            <div class="form-group">
                                <label>Video Conferencing Option</label>
                                <div class="video-options">
                                    <div class="video-option" onclick="selectVideoOption('builtin')">
                                        <i class="fas fa-video"></i>
                                        <h4>Built-in Video Call</h4>
                                        <p>Use our integrated video system</p>
                                    </div>
                                    <div class="video-option" onclick="selectVideoOption('googlemeet')">
                                        <i class="fab fa-google"></i>
                                        <h4>Google Meet</h4>
                                        <p>Use your custom Google Meet link</p>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" id="meetLinkGroup" style="display: none;">
                                <label>Google Meet Link</label>
                                <input type="url" id="customMeetLink" class="form-control" placeholder="https://meet.google.com/xxx-xxxx-xxx">
                            </div>

                            <div class="form-group">
                                <label>Prerequisites</label>
                                <input type="text" id="skillPrerequisites" class="form-control" placeholder="Basic HTML/CSS knowledge, Programming fundamentals...">
                            </div>

                            <div class="form-group">
                                <label>Certification Recommendations (Optional)</label>
                                <textarea id="certificationRecs" class="form-control" placeholder="Recommend official certifications or courses students can take after completing this skill..."></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">Create Skill Session</button>
                        </form>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-list-ul"></i> My Teaching Sessions</h3>
                        <div id="myTeachingList">
                            <p style="text-align: center; color: var(--text-light); font-style: italic;">
                                No teaching sessions created yet. Create your first skill above!
                            </p>
                        </div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-microphone-alt"></i> Mock Interview Sessions</h3>
                        <p>Offer mock interviews for specific skills or general career guidance. Help others prepare for their dream jobs!</p>
                        <button class="btn btn-primary" onclick="createMockInterviewListing()">Create Mock Interview Session</button>
                    </div>
                </section>

                <!-- My Sessions Section -->
                <section id="sessions" class="page-section">
                    <h1 class="page-title">My Sessions</h1>
                    <p class="page-subtitle">Manage your learning and teaching sessions</p>

                    <div class="card">
                        <h3><i class="fas fa-graduation-cap"></i> My Learning Sessions</h3>
                        <div id="learningSessionsList">
                            <p style="text-align: center; color: var(--text-light); font-style: italic;">
                                No learning sessions booked yet. <a href="#" onclick="showSection('learn')" style="color: var(--primary-blue);">Browse skills</a> to book your first session.
                            </p>
                        </div>
                    </div>

                    <div class="card">
                        <h3><i class="fas fa-chalkboard-teacher"></i> My Teaching Schedule</h3>
                        <div id="teachingScheduleList">
                            <p style="text-align: center; color: var(--text-light); font-style: italic;">
                                No students have booked your sessions yet. Create more skills to attract learners!
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Career Section -->
                <section id="career" class="page-section">
                    <h1 class="page-title">AI Career Analysis</h1>
                    <p class="page-subtitle">Get personalized insights for your career growth powered by AI</p>

                    <div class="analysis-card">
                        <h3><i class="fas fa-robot"></i> AI Career Analyzer</h3>
                        <p>Upload your resume and paste job requirements to get personalized skill recommendations. Our AI will analyze the gap between your skills and job requirements.</p>
                        
                        <form id="careerForm" onsubmit="analyzeCareer(event)">
                            <div class="form-group">
                                <label>Job Requirements</label>
                                <textarea class="form-control textarea" id="jobRequirements" placeholder="Paste the job description and requirements here..." required></textarea>
                            </div>

                            <div class="form-group">
                                <label>Upload Resume</label>
                                <div class="file-upload" onclick="document.getElementById('resumeFile').click()">
                                    <i class="fas fa-cloud-upload-alt fa-2x" style="color: var(--primary-blue); margin-bottom: 10px;"></i>
                                    <p><strong>Click to upload your resume</strong></p>
                                    <small>Supported formats: PDF, DOC, DOCX (Max 5MB)</small>
                                    <input type="file" id="resumeFile" accept=".pdf,.doc,.docx" style="display: none;" onchange="handleResumeUpload()">
                                    <div id="resumeFileName" style="margin-top: 10px; font-weight: 500; color: var(--primary-blue);"></div>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-brain"></i> Analyze Career Match
                            </button>
                        </form>

                        <div style="background: var(--light-blue); border-radius: 10px; padding: 20px; margin-top: 20px;">
                            <h4><i class="fas fa-info-circle"></i> How Our AI Works</h4>
                            <p>Our AI uses advanced natural language processing to parse your resume and job requirements, identifying key skills and competencies. It performs semantic analysis to highlight gaps and suggests relevant learning paths based on industry data.</p>
                        </div>
                    </div>

                    <div id="analysisResults" style="display: none;">
                        <h3>AI Analysis Results</h3>
                        <div class="skill-analysis">
                            <div class="skill-category excellent">
                                <h4><i class="fas fa-check-circle"></i> Skills Up to the Mark</h4>
                                <ul class="skill-list" id="excellentSkills">
                                    <!-- Populated by AI analysis -->
                                </ul>
                            </div>

                            <div class="skill-category needs-improvement">
                                <h4><i class="fas fa-exclamation-triangle"></i> Skills Needing Improvement</h4>
                                <ul class="skill-list" id="improvementSkills">
                                    <!-- Populated by AI analysis -->
                                </ul>
                            </div>

                            <div class="skill-category learn-immediately">
                                <h4><i class="fas fa-times-circle"></i> Skills to Learn Immediately</h4>
                                <ul class="skill-list" id="learnSkills">
                                    <!-- Populated by AI analysis -->
                                </ul>
                            </div>
                        </div>

                        <div class="card" style="margin-top: 30px;">
                            <h3><i class="fas fa-lightbulb"></i> Personalized Recommendations</h3>
                            <div id="recommendations">
                                <!-- AI recommendations will be populated here -->
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <div class="mobile-nav-items">
                <a href="#" class="mobile-nav-item active" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="#" class="mobile-nav-item" onclick="showSection('learn')">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Learn</span>
                </a>
                <a href="#" class="mobile-nav-item" onclick="showSection('teach')">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Teach</span>
                </a>
                <a href="#" class="mobile-nav-item" onclick="showSection('sessions')">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Sessions</span>
                </a>
                <a href="#" class="mobile-nav-item" onclick="showSection('career')">
                    <i class="fas fa-briefcase"></i>
                    <span>Career</span>
                </a>
            </div>
        </nav>

        <!-- Floating Action Button -->
        <button class="floating-btn" onclick="showPaymentModal()" title="Buy Credits">
            <i class="fas fa-coins"></i>
        </button>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('paymentModal')">&times;</button>
            <h2><i class="fas fa-credit-card"></i> Buy Credits</h2>
            <p>Each credit costs ₹10. Select a package or enter a custom amount.</p>

            <div class="payment-options">
                <div class="payment-option" onclick="selectCreditPackage(10, 100)">
                    <i class="fas fa-star"></i>
                    <h4>10 Credits</h4>
                    <p>₹100</p>
                </div>
                <div class="payment-option" onclick="selectCreditPackage(25, 250)">
                    <i class="fas fa-fire"></i>
                    <h4>25 Credits</h4>
                    <p>₹250</p>
                </div>
                <div class="payment-option" onclick="selectCreditPackage(50, 500)">
                    <i class="fas fa-crown"></i>
                    <h4>50 Credits</h4>
                    <p>₹500</p>
                </div>
            </div>

            <div class="form-group">
                <label>Credits to Buy</label>
                <input type="number" id="creditAmount" class="form-control" min="1" value="10" onchange="updatePaymentAmount()">
            </div>

            <div class="form-group">
                <label>Total Amount: ₹<span id="totalAmount">100</span></label>
            </div>

            <div class="form-group">
                <label>Payment Method</label>
                <div class="payment-options">
                    <div class="payment-option selected" onclick="selectPaymentMethod('upi')">
                        <i class="fas fa-mobile-alt"></i>
                        <h4>UPI</h4>
                    </div>
                    <div class="payment-option" onclick="selectPaymentMethod('card')">
                        <i class="fas fa-credit-card"></i>
                        <h4>Card</h4>
                    </div>
                    <div class="payment-option" onclick="selectPaymentMethod('wallet')">
                        <i class="fas fa-wallet"></i>
                        <h4>Wallet</h4>
                    </div>
                </div>
            </div>

            <div id="upiDetails" class="form-group">
                <label>UPI ID</label>
                <input type="text" class="form-control" value="9506344448@slc" readonly>
                <small style="color: var(--text-light);">Send payment to this UPI ID. Credits will be added after verification.</small>
            </div>

            <div id="cardDetails" class="form-group" style="display: none;">
                <div class="form-row">
                    <input type="text" class="form-control" placeholder="Card Number" maxlength="19">
                    <input type="text" class="form-control" placeholder="MM/YY" maxlength="5">
                </div>
                <div class="form-row">
                    <input type="text" class="form-control" placeholder="CVV" maxlength="3">
                    <input type="text" class="form-control" placeholder="Name on Card">
                </div>
            </div>

            <button class="btn btn-primary" onclick="processPayment()">
                <i class="fas fa-lock"></i> Pay ₹<span id="payAmount">100</span>
            </button>
        </div>
    </div>

    <!-- Video Call Modal -->
    <div id="videoCallModal" class="modal">
        <div class="modal-content" style="width: 95%; max-width: 800px; height: 90vh;">
            <button class="modal-close" onclick="closeModal('videoCallModal')">&times;</button>
            <h2><i class="fas fa-video"></i> Video Learning Session</h2>
            
            <div class="video-container">
                <div class="video-feed local-video">You</div>
                <div class="video-feed remote-video">Instructor</div>
                <div style="color: #ccc; text-align: center;">
                    <i class="fas fa-video fa-3x" style="margin-bottom: 20px;"></i>
                    <h3>Connecting to session...</h3>
                    <p>Please wait while we connect you to your instructor</p>
                </div>
            </div>
            
            <div class="video-controls">
                <button class="control-btn inactive" id="videoBtn" onclick="toggleVideo()" title="Toggle Video">
                    <i class="fas fa-video"></i>
                </button>
                <button class="control-btn inactive" id="audioBtn" onclick="toggleAudio()" title="Toggle Audio">
                    <i class="fas fa-microphone"></i>
                </button>
                <button class="control-btn inactive" id="screenBtn" onclick="toggleScreenShare()" title="Share Screen">
                    <i class="fas fa-desktop"></i>
                </button>
                <button class="control-btn" style="background: var(--error); color: white;" onclick="endCall()" title="End Call">
                    <i class="fas fa-phone-slash"></i>
                </button>
            </div>

            <div style="margin-top: 20px; text-align: center;">
                <label style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <input type="checkbox" id="screenShareEnabled"> Enable Screen Sharing
                </label>
            </div>
        </div>
    </div>

    <!-- Session Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('bookingModal')">&times;</button>
            <h2><i class="fas fa-calendar-plus"></i> Book Skill Session</h2>
            <div id="bookingDetails">
                <!-- Booking details will be populated here -->
            </div>
            <div class="form-group">
                <label>Preferred Date & Time</label>
                <input type="datetime-local" id="sessionDateTime" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Special Requirements (Optional)</label>
                <textarea id="specialRequirements" class="form-control" placeholder="Any specific topics you'd like to focus on..."></textarea>
            </div>
            <button class="btn btn-primary" onclick="confirmBooking()">
                <i class="fas fa-check"></i> Confirm Booking
            </button>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <h3 id="confirmationMessage">Are you sure?</h3>
            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                <button class="btn-sm btn-success" id="confirmYes">Yes</button>
                <button class="btn-sm" style="background: var(--error); color: white;" id="confirmNo">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let userCredits = 0;
        let bookedSessions = [];
        let teachingSessions = [];
        let selectedVideoOption = 'builtin';
        let selectedPaymentMethod = 'upi';
        let allSkills = [];
        let currentBookingSkill = null;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const savedUser = localStorage.getItem('skillhive_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainApp();
            }
            
            // Initialize sample data
            initializeSampleData();
        });

        // Sample data initialization
        function initializeSampleData() {
            allSkills = [
                {
                    id: 'skill1',
                    title: 'Full Stack Web Development',
                    description: 'Learn MERN stack development from basics to advanced projects. Includes hands-on coding sessions and real-world project building.',
                    instructor: 'Sarah Johnson',
                    credits: 45,
                    duration: 3,
                    category: 'programming',
                    rating: 4.8,
                    reviews: 124,
                    tags: ['javascript', 'react', 'node.js', 'mongodb'],
                    prerequisites: 'Basic HTML/CSS knowledge',
                    videoOption: 'builtin',
                    featuredSkills: true
                },
                {
                    id: 'skill2',
                    title: 'Digital Marketing Mastery',
                    description: 'Master social media marketing, SEO, and content strategy. Learn to create effective campaigns and measure ROI.',
                    instructor: 'Mike Chen',
                    credits: 35,
                    duration: 2.5,
                    category: 'marketing',
                    rating: 4.9,
                    reviews: 89,
                    tags: ['seo', 'social-media', 'content-marketing', 'analytics'],
                    prerequisites: 'Basic computer skills',
                    videoOption: 'googlemeet'
                },
                {
                    id: 'skill3',
                    title: 'UI/UX Design Fundamentals',
                    description: 'Learn design thinking, wireframing, and prototyping using industry-standard tools like Figma and Adobe XD.',
                    instructor: 'Emma Davis',
                    credits: 40,
                    duration: 2,
                    category: 'design',
                    rating: 4.7,
                    reviews: 156,
                    tags: ['figma', 'wireframing', 'prototyping', 'user-research'],
                    prerequisites: 'Design interest, no experience needed',
                    videoOption: 'builtin',
                    featuredSkills: true
                },
                {
                    id: 'skill4',
                    title: 'Python for Data Science',
                    description: 'Master Python programming for data analysis, visualization, and machine learning. Includes pandas, matplotlib, and scikit-learn.',
                    instructor: 'Dr. James Wilson',
                    credits: 50,
                    duration: 4,
                    category: 'programming',
                    rating: 4.9,
                    reviews: 203,
                    tags: ['python', 'data-science', 'machine-learning', 'pandas'],
                    prerequisites: 'Basic programming knowledge',
                    videoOption: 'builtin'
                },
                {
                    id: 'skill5',
                    title: 'Business Strategy & Leadership',
                    description: 'Develop strategic thinking and leadership skills. Learn to make data-driven decisions and lead high-performing teams.',
                    instructor: 'Jennifer Rodriguez',
                    credits: 60,
                    duration: 3,
                    category: 'business',
                    rating: 4.8,
                    reviews: 78,
                    tags: ['leadership', 'strategy', 'management', 'decision-making'],
                    prerequisites: '2+ years work experience',
                    videoOption: 'googlemeet',
                    featuredSkills: true
                },
                {
                    id: 'skill6',
                    title: 'Spanish Conversation Practice',
                    description: 'Improve your Spanish speaking skills through structured conversations and cultural immersion techniques.',
                    instructor: 'Carlos Mendez',
                    credits: 25,
                    duration: 1.5,
                    category: 'language',
                    rating: 4.6,
                    reviews: 92,
                    tags: ['spanish', 'conversation', 'pronunciation', 'culture'],
                    prerequisites: 'Basic Spanish vocabulary',
                    videoOption: 'builtin'
                }
            ];

            if (currentUser) {
                loadFeaturedSkills();
                loadAllSkills();
            }
        }

        // Authentication functions
        function signInWithGoogle() {
            // Simulate Google Sign-In
            const mockGoogleUser = {
                id: 'google_' + Math.random().toString(36).substr(2, 9),
                name: 'John Doe',
                email: 'john.doe@gmail.com',
                avatar: 'JD',
                provider: 'google'
            };
            
            currentUser = mockGoogleUser;
            localStorage.setItem('skillhive_user', JSON.stringify(currentUser));
            userCredits = 50; // Welcome bonus
            showMainApp();
            showNotification('Welcome to SkillHive! You received 50 welcome credits.', 'success');
        }

        function handleLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // Clear previous errors
            clearErrors();

            // Basic validation
            if (!validateEmail(email)) {
                showError('emailError', 'Please enter a valid email address');
                return;
            }

            if (password.length < 6) {
                showError('passwordError', 'Password must be at least 6 characters');
                return;
            }

            // Simulate login
            const mockUser = {
                id: 'user_' + Math.random().toString(36).substr(2, 9),
                name: email.split('@')[0],
                email: email,
                avatar: email.charAt(0).toUpperCase(),
                provider: 'custom'
            };

            currentUser = mockUser;
            localStorage.setItem('skillhive_user', JSON.stringify(currentUser));
            userCredits = 25; // Welcome bonus
            showMainApp();
            showNotification('Login successful! Welcome back.', 'success');
        }

        function handleSignup() {
            const name = document.getElementById('signupName').value;
            const username = document.getElementById('signupUsername').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            // Clear previous errors
            clearSignupErrors();

            let isValid = true;

            // Validation
            if (!name.trim()) {
                showError('nameError', 'Name is required');
                isValid = false;
            }

            if (!validateUsername(username)) {
                showError('usernameError', 'Username must be 3-20 characters, alphanumeric only');
                isValid = false;
            }

            if (!validateEmail(email)) {
                showError('signupEmailError', 'Please enter a valid email address');
                isValid = false;
            }

            if (password.length < 6) {
                showError('signupPasswordError', 'Password must be at least 6 characters');
                isValid = false;
            }

            if (!isValid) return;

            // Simulate signup
            const mockUser = {
                id: 'user_' + Math.random().toString(36).substr(2, 9),
                name: name,
                username: username,
                email: email,
                avatar: name.charAt(0).toUpperCase(),
                provider: 'custom'
            };

            currentUser = mockUser;
            localStorage.setItem('skillhive_user', JSON.stringify(currentUser));
            userCredits = 50; // Welcome bonus
            showMainApp();
            showNotification('Account created successfully! You received 50 welcome credits.', 'success');
        }

        function logout() {
            showConfirmation('Are you sure you want to logout?', () => {
                currentUser = null;
                userCredits = 0;
                bookedSessions = [];
                teachingSessions = [];
                localStorage.removeItem('skillhive_user');
                
                document.getElementById('mainApp').style.display = 'none';
                document.getElementById('loginPage').style.display = 'flex';
                
                showNotification('You have been logged out successfully.', 'info');
            });
        }

        // Validation functions
        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function validateUsername(username) {
            return /^[a-zA-Z0-9]{3,20}$/.test(username);
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            const inputElement = errorElement.parentElement.querySelector('.form-control');
            errorElement.textContent = message;
            inputElement.classList.add('error');
        }

        function clearErrors() {
            document.getElementById('emailError').textContent = '';
            document.getElementById('passwordError').textContent = '';
            document.querySelectorAll('#loginForm .form-control').forEach(input => {
                input.classList.remove('error');
            });
        }

        function clearSignupErrors() {
            document.getElementById('nameError').textContent = '';
            document.getElementById('usernameError').textContent = '';
            document.getElementById('signupEmailError').textContent = '';
            document.getElementById('signupPasswordError').textContent = '';
            document.querySelectorAll('#signupForm .form-control').forEach(input => {
                input.classList.remove('error');
            });
        }

        function showSignUp() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
            clearErrors();
            clearSignupErrors();
        }

        function showLogin() {
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            clearErrors();
            clearSignupErrors();
        }

        function showMainApp() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            // Update user info
            document.getElementById('userCredits').textContent = userCredits;
            document.getElementById('userAvatar').textContent = currentUser.avatar;
            
            // Load data
            loadFeaturedSkills();
            loadAllSkills();
            loadUserSessions();
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.page-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Show selected section
            const targetSection = document.getElementById(sectionName);
            targetSection.classList.add('active');
            targetSection.classList.add('fadeIn');
            
            // Update navigation
            const navLinks = document.querySelectorAll('.nav-tab, .mobile-nav-item');
            navLinks.forEach(link => link.classList.remove('active'));
            
            const activeLinks = document.querySelectorAll(`[onclick*="'${sectionName}'"]`);
            activeLinks.forEach(link => link.classList.add('active'));

            // Load section-specific data
            if (sectionName === 'learn') {
                loadAllSkills();
            } else if (sectionName === 'sessions') {
                loadUserSessions();
            }
        }

        // Skills management
        function loadFeaturedSkills() {
            const featuredSkills = allSkills.filter(skill => skill.featuredSkills);
            const container = document.getElementById('featuredSkills');
            
            if (featuredSkills.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light);">No featured skills available.</p>';
                return;
            }

            container.innerHTML = featuredSkills.map(skill => createSkillCard(skill, true)).join('');
        }

        function loadAllSkills() {
            const container = document.getElementById('skillsList');
            container.innerHTML = allSkills.map(skill => createSkillCard(skill)).join('');
        }

        function createSkillCard(skill, isFeatured = false) {
            const tagHtml = skill.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
            
            return `
                <div class="card skill-card">
                    ${isFeatured ? '<div style="background: linear-gradient(45deg, var(--primary-yellow), var(--warning)); color: white; padding: 5px 10px; border-radius: 15px; display: inline-block; margin-bottom: 10px; font-size: 12px; font-weight: bold;"><i class="fas fa-star"></i> FEATURED</div>' : ''}
                    <h3>${skill.title}</h3>
                    <p>${skill.description}</p>
                    <div class="skill-tags">${tagHtml}</div>
                    <p><strong>Instructor:</strong> ${skill.instructor}</p>
                    <p><strong>Duration:</strong> ${skill.duration} hours</p>
                    <p><strong>Prerequisites:</strong> ${skill.prerequisites}</p>
                    <div class="skill-meta">
                        <span class="skill-price">${skill.credits} Credits</span>
                        <span class="skill-rating">
                            <i class="fas fa-star"></i> ${skill.rating} (${skill.reviews} reviews)
                        </span>
                        <button class="btn-sm btn-success" onclick="openBookingModal('${skill.id}')">
                            <i class="fas fa-calendar-plus"></i> Book Session
                        </button>
                    </div>
                </div>
            `;
        }

        function filterSkills() {
            const searchTerm = document.getElementById('skillSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const priceFilter = document.getElementById('priceFilter').value;
            const sortBy = document.getElementById('sortBy').value;

            let filteredSkills = allSkills.filter(skill => {
                const matchesSearch = skill.title.toLowerCase().includes(searchTerm) ||
                                    skill.description.toLowerCase().includes(searchTerm) ||
                                    skill.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                const matchesCategory = !categoryFilter || skill.category === categoryFilter;
                
                let matchesPrice = true;
                if (priceFilter) {
                    const [min, max] = priceFilter.split('-').map(Number);
                    if (max) {
                        matchesPrice = skill.credits >= min && skill.credits <= max;
                    } else {
                        matchesPrice = skill.credits >= min;
                    }
                }

                return matchesSearch && matchesCategory && matchesPrice;
            });

            // Sort skills
            if (sortBy === 'rating') {
                filteredSkills.sort((a, b) => b.rating - a.rating);
            } else if (sortBy === 'price') {
                filteredSkills.sort((a, b) => a.credits - b.credits);
            }

            const container = document.getElementById('skillsList');
            if (filteredSkills.length === 0) {
                container.innerHTML = '<div class="card"><p style="text-align: center; color: var(--text-light);">No skills found matching your criteria.</p></div>';
            } else {
                container.innerHTML = filteredSkills.map(skill => createSkillCard(skill)).join('');
            }
        }

        // Booking functions
        function openBookingModal(skillId) {
            const skill = allSkills.find(s => s.id === skillId);
            if (!skill) return;

            if (userCredits < skill.credits) {
                showNotification(`Insufficient credits! You need ${skill.credits} credits but only have ${userCredits}.`, 'error');
                showPaymentModal();
                return;
            }

            currentBookingSkill = skill;
            document.getElementById('bookingDetails').innerHTML = `
                <div class="card" style="margin-bottom: 20px;">
                    <h4>${skill.title}</h4>
                    <p><strong>Instructor:</strong> ${skill.instructor}</p>
                    <p><strong>Duration:</strong> ${skill.duration} hours</p>
                    <p><strong>Credits:</strong> ${skill.credits}</p>
                    <p><strong>Your Credits:</strong> ${userCredits}</p>
                </div>
            `;

            // Set minimum datetime to now
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('sessionDateTime').min = now.toISOString().slice(0, 16);

            document.getElementById('bookingModal').classList.add('active');
        }

        function confirmBooking() {
            const datetime = document.getElementById('sessionDateTime').value;
            const requirements = document.getElementById('specialRequirements').value;

            if (!datetime) {
                showNotification('Please select a date and time for your session.', 'error');
                return;
            }

            const selectedDate = new Date(datetime);
            if (selectedDate <= new Date()) {
                showNotification('Please select a future date and time.', 'error');
                return;
            }

            // Deduct credits
            userCredits -= currentBookingSkill.credits;
            document.getElementById('userCredits').textContent = userCredits;

            // Add to booked sessions
            const session = {
                id: 'session_' + Date.now(),
                skill: currentBookingSkill.title,
                instructor: currentBookingSkill.instructor,
                credits: currentBookingSkill.credits,
                datetime: datetime,
                requirements: requirements,
                status: 'upcoming',
                videoOption: currentBookingSkill.videoOption,
                skillId: currentBookingSkill.id
            };

            bookedSessions.push(session);
            localStorage.setItem('skillhive_sessions', JSON.stringify(bookedSessions));

            closeModal('bookingModal');
            showNotification(`Session "${currentBookingSkill.title}" booked successfully!`, 'success');
            
            // Reset form
            document.getElementById('sessionDateTime').value = '';
            document.getElementById('specialRequirements').value = '';
            currentBookingSkill = null;
        }

        // Teaching functions
        function selectVideoOption(option) {
            selectedVideoOption = option;
            
            // Update UI
            const options = document.querySelectorAll('.video-option');
            options.forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            // Show/hide Google Meet link field
            const meetLinkGroup = document.getElementById('meetLinkGroup');
            if (option === 'googlemeet') {
                meetLinkGroup.style.display = 'block';
            } else {
                meetLinkGroup.style.display = 'none';
            }
        }

        function createSkillSession(event) {
            event.preventDefault();
            
            const title = document.getElementById('skillTitle').value;
            const category = document.getElementById('skillCategory').value;
            const description = document.getElementById('skillDescription').value;
            const credits = parseInt(document.getElementById('skillCredits').value);
            const duration = parseFloat(document.getElementById('skillDuration').value);
            const tags = document.getElementById('skillTags').value.split(',').map(tag => tag.trim()).filter(tag => tag);
            const prerequisites = document.getElementById('skillPrerequisites').value;
            const certificationRecs = document.getElementById('certificationRecs').value;
            const customMeetLink = document.getElementById('customMeetLink').value;

            if (selectedVideoOption === 'googlemeet' && (!customMeetLink || !customMeetLink.includes('meet.google.com'))) {
                showNotification('Please provide a valid Google Meet link.', 'error');
                return;
            }

            const newSkill = {
                id: 'skill_' + Date.now(),
                title,
                description,
                instructor: currentUser.name,
                credits,
                duration,
                category,
                rating: 0,
                reviews: 0,
                tags,
                prerequisites: prerequisites || 'None',
                videoOption: selectedVideoOption,
                customMeetLink: selectedVideoOption === 'googlemeet' ? customMeetLink : null,
                certificationRecs,
                createdBy: currentUser.id
            };

            allSkills.push(newSkill);
            teachingSessions.push(newSkill);
            localStorage.setItem('skillhive_teaching', JSON.stringify(teachingSessions));

            // Clear form
            document.getElementById('teachForm').reset();
            selectedVideoOption = 'builtin';
            document.querySelectorAll('.video-option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById('meetLinkGroup').style.display = 'none';

            loadMyTeachingSkills();
            showNotification('Skill session created successfully!', 'success');
        }

        function loadMyTeachingSkills() {
            const mySkills = teachingSessions.filter(skill => skill.createdBy === currentUser.id);
            const container = document.getElementById('myTeachingList');
            
            if (mySkills.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light); font-style: italic;">No teaching sessions created yet. Create your first skill above!</p>';
                return;
            }

            container.innerHTML = mySkills.map(skill => `
                <div class="card">
                    <h4>${skill.title}</h4>
                    <p>${skill.description}</p>
                    <div class="skill-meta">
                        <span class="skill-price">${skill.credits} Credits</span>
                        <span>Duration: ${skill.duration}h</span>
                        <button class="btn-sm btn-outline" onclick="editSkill('${skill.id}')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function editSkill(skillId) {
            showNotification('Edit functionality would open a pre-filled form with skill details.', 'info');
        }

        function createMockInterviewListing() {
            showNotification('Mock interview creation feature would open a specialized form for interview sessions.', 'info');
        }

        // Session management
        function loadUserSessions() {
            const savedSessions = localStorage.getItem('skillhive_sessions');
            if (savedSessions) {
                bookedSessions = JSON.parse(savedSessions);
            }

            const learningContainer = document.getElementById('learningSessionsList');
            const teachingContainer = document.getElementById('teachingScheduleList');

            // Load learning sessions
            if (bookedSessions.length === 0) {
                learningContainer.innerHTML = '<p style="text-align: center; color: var(--text-light); font-style: italic;">No learning sessions booked yet. <a href="#" onclick="showSection(\'learn\')" style="color: var(--primary-blue);">Browse skills</a> to book your first session.</p>';
            } else {
                learningContainer.innerHTML = bookedSessions.map(session => createSessionCard(session)).join('');
            }

            // Load teaching schedule (simulated)
            teachingContainer.innerHTML = '<p style="text-align: center; color: var(--text-light); font-style: italic;">No students have booked your sessions yet. Create more skills to attract learners!</p>';
        }

        function createSessionCard(session) {
            const sessionDate = new Date(session.datetime);
            const isUpcoming = sessionDate > new Date();
            
            return `
                <div class="card session-card">
                    <div class="session-status ${isUpcoming ? 'status-upcoming' : 'status-completed'}">
                        ${isUpcoming ? 'Upcoming' : 'Completed'}
                    </div>
                    <h4>${session.skill}</h4>
                    <p><strong>Instructor:</strong> ${session.instructor}</p>
                    <p><strong>Date & Time:</strong> ${sessionDate.toLocaleString()}</p>
                    <p><strong>Credits Paid:</strong> ${session.credits}</p>
                    ${session.requirements ? `<p><strong>Special Requirements:</strong> ${session.requirements}</p>` : ''}
                    <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                        ${isUpcoming ? `
                            <button class="btn-sm btn-success" onclick="joinVideoSession('${session.id}')">
                                <i class="fas fa-video"></i> Join Session
                            </button>
                            <button class="btn-sm btn-outline" onclick="rescheduleSession('${session.id}')">
                                <i class="fas fa-calendar"></i> Reschedule
                            </button>
                        ` : `
                            <button class="btn-sm btn-outline" onclick="startMockInterview('${session.skill}')">
                                <i class="fas fa-microphone-alt"></i> Mock Interview
                            </button>
                            <button class="btn-sm btn-outline" onclick="showCertification('${session.skill}')">
                                <i class="fas fa-certificate"></i> Certificate
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        function joinVideoSession(sessionId) {
            const session = bookedSessions.find(s => s.id === sessionId);
            if (!session) return;

            document.getElementById('videoCallModal').classList.add('active');
            
            // Simulate connection process
            setTimeout(() => {
                const videoContainer = document.querySelector('.video-container');
                videoContainer.innerHTML = `
                    <div class="video-feed local-video">You</div>
                    <div class="video-feed remote-video">${session.instructor}</div>
                    <div style="color: #ccc; text-align: center;">
                        <h3>Connected to ${session.skill}</h3>
                        <p>Session with ${session.instructor} is now active</p>
                    </div>
                `;
            }, 2000);
        }

        function rescheduleSession(sessionId) {
            showNotification('Reschedule functionality would open a calendar to select new date/time.', 'info');
        }

        function startMockInterview(skillTitle) {
            showNotification(`Starting mock interview for ${skillTitle}. This would open an AI-powered interview simulation.`, 'info');
        }

        function showCertification(skillTitle) {
            showNotification(`Opening certificate for ${skillTitle}. This would generate a completion certificate.`, 'success');
        }

        // Video call controls
        function toggleVideo() {
            const btn = document.getElementById('videoBtn');
            const isActive = btn.classList.contains('active');
            
            if (isActive) {
                btn.classList.remove('active');
                btn.classList.add('inactive');
                btn.innerHTML = '<i class="fas fa-video-slash"></i>';
            } else {
                btn.classList.add('active');
                btn.classList.remove('inactive');
                btn.innerHTML = '<i class="fas fa-video"></i>';
            }
            
            showNotification(`Video ${isActive ? 'disabled' : 'enabled'}`, 'info');
        }

        function toggleAudio() {
            const btn = document.getElementById('audioBtn');
            const isActive = btn.classList.contains('active');
            
            if (isActive) {
                btn.classList.remove('active');
                btn.classList.add('mute');
                btn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
            } else {
                btn.classList.add('active');
                btn.classList.remove('mute');
                btn.innerHTML = '<i class="fas fa-microphone"></i>';
            }
            
            showNotification(`Audio ${isActive ? 'muted' : 'unmuted'}`, 'info');
        }

        function toggleScreenShare() {
            const btn = document.getElementById('screenBtn');
            const isActive = btn.classList.contains('active');
            
            btn.classList.toggle('active');
            btn.classList.toggle('inactive');
            
            showNotification(`Screen sharing ${isActive ? 'stopped' : 'started'}`, 'info');
        }

        function endCall() {
            showConfirmation('End this session?', () => {
                closeModal('videoCallModal');
                showNotification('Session ended. Thank you for using SkillHive!', 'success');
            });
        }

        // Career analysis
        function handleResumeUpload() {
            const file = document.getElementById('resumeFile').files[0];
            const resumeFileName = document.getElementById('resumeFileName');
            
            if (file) {
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    showNotification('File size too large. Please upload a file smaller than 5MB.', 'error');
                    document.getElementById('resumeFile').value = '';
                    return;
                }
                resumeFileName.textContent = `📄 ${file.name}`;
            } else {
                resumeFileName.textContent = '';
            }
        }

        function analyzeCareer(event) {
            event.preventDefault();
            
            const jobRequirements = document.getElementById('jobRequirements').value;
            const resumeFile = document.getElementById('resumeFile').files[0];
            
            if (!jobRequirements.trim()) {
                showNotification('Please enter job requirements.', 'error');
                return;
            }
            
            if (!resumeFile) {
                showNotification('Please upload your resume.', 'error');
                return;
            }
            
            // Show loading state
            const resultsDiv = document.getElementById('analysisResults');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div style="margin-left: 20px;">
                        <h3>Analyzing your career profile...</h3>
                        <p>Our AI is comparing your resume with job requirements</p>
                    </div>
                </div>
            `;
            
            // Simulate AI analysis
            setTimeout(() => {
                showAnalysisResults();
            }, 3000);
        }

        function showAnalysisResults() {
            // Mock analysis results based on job requirements
            const excellentSkills = ['JavaScript', 'HTML/CSS', 'Problem Solving', 'Team Collaboration', 'Git Version Control'];
            const improvementSkills = ['React.js', 'Node.js', 'Database Management', 'API Development'];
            const learnSkills = ['Docker', 'AWS Cloud Services', 'TypeScript', 'System Design', 'Microservices'];
            
            document.getElementById('excellentSkills').innerHTML = 
                excellentSkills.map(skill => `<li>${skill} <span style="color: var(--success);"><i class="fas fa-check"></i></span></li>`).join('');
            
            document.getElementById('improvementSkills').innerHTML = 
                improvementSkills.map(skill => `<li>${skill} <span style="color: var(--warning);"><i class="fas fa-arrow-up"></i></span></li>`).join('');
            
            document.getElementById('learnSkills').innerHTML = 
                learnSkills.map(skill => `<li>${skill} <span style="color: var(--error);"><i class="fas fa-plus"></i></span></li>`).join('');
            
            document.getElementById('recommendations').innerHTML = `
                <div style="background: linear-gradient(135deg, var(--light-blue), rgba(16, 185, 129, 0.1)); padding: 20px; border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--error);">
                    <h4><i class="fas fa-exclamation-triangle"></i> Priority 1: Learn Docker & AWS</h4>
                    <p>These are critical for DevOps requirements in the job posting. Focus on containerization and cloud deployment.</p>
                    <button class="btn-sm btn-success" onclick="searchSkillsForCareer('Docker')">Find Docker Courses</button>
                </div>
                <div style="background: linear-gradient(135deg, var(--light-yellow), rgba(245, 158, 11, 0.1)); padding: 20px; border-radius: 15px; margin-bottom: 20px; border-left: 4px solid var(--warning);">
                    <h4><i class="fas fa-chart-line"></i> Priority 2: Strengthen React.js & Node.js</h4>
                    <p>Your experience shows basic knowledge, but advanced concepts are needed for senior-level positions.</p>
                    <button class="btn-sm btn-success" onclick="searchSkillsForCareer('React')">Find React Courses</button>
                </div>
                <div style="background: var(--gray-100); padding: 20px; border-radius: 15px; border-left: 4px solid var(--primary-blue);">
                    <h4><i class="fas fa-lightbulb"></i> Bonus Recommendation</h4>
                    <p>Consider system design mock interviews to prepare for technical discussions about architecture and scalability.</p>
                    <button class="btn-sm btn-outline" onclick="searchSkillsForCareer('System Design')">Find Mock Interviews</button>
                </div>
            `;
        }

        function searchSkillsForCareer(skillName) {
            showSection('learn');
            document.getElementById('skillSearch').value = skillName;
            filterSkills();
            showNotification(`Showing courses related to "${skillName}"`, 'success');
        }

        // Payment functions
        function showPaymentModal() {
            document.getElementById('paymentModal').classList.add('active');
        }

        function selectCreditPackage(credits, price) {
            document.getElementById('creditAmount').value = credits;
            updatePaymentAmount();
            
            // Highlight selected package
            document.querySelectorAll('#paymentModal .payment-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        function updatePaymentAmount() {
            const credits = parseInt(document.getElementById('creditAmount').value) || 0;
            const amount = credits * 10;
            document.getElementById('totalAmount').textContent = amount;
            document.getElementById('payAmount').textContent = amount;
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Update UI
            const options = document.querySelectorAll('#paymentModal .payment-options')[1].querySelectorAll('.payment-option');
            options.forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            
            // Show/hide payment details
            document.getElementById('upiDetails').style.display = method === 'upi' ? 'block' : 'none';
            document.getElementById('cardDetails').style.display = method === 'card' ? 'block' : 'none';
        }

        function processPayment() {
            const credits = parseInt(document.getElementById('creditAmount').value) || 0;
            const amount = credits * 10;
            
            if (credits < 1) {
                showNotification('Please select a valid number of credits.', 'error');
                return;
            }
            
            showConfirmation(`Confirm payment of ₹${amount} for ${credits} credits?`, () => {
                // Simulate payment processing
                setTimeout(() => {
                    userCredits += credits;
                    document.getElementById('userCredits').textContent = userCredits;
                    closeModal('paymentModal');
                    showNotification(`Successfully added ${credits} credits to your account!`, 'success');
                }, 1500);
            });
        }

        // Modal management
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            
            // Reset forms if needed
            if (modalId === 'bookingModal') {
                document.getElementById('sessionDateTime').value = '';
                document.getElementById('specialRequirements').value = '';
                currentBookingSkill = null;
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 3000;
                min-width: 300px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease-out;
            `;

            // Set background color based on type
            switch (type) {
                case 'success':
                    notification.style.background = 'var(--success)';
                    break;
                case 'error':
                    notification.style.background = 'var(--error)';
                    break;
                case 'warning':
                    notification.style.background = 'var(--warning)';
                    break;
                default:
                    notification.style.background = 'var(--primary-blue)';
            }

            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            // Auto remove after 4 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 300);
                }
            }, 4000);
        }

        // Confirmation dialog
        function showConfirmation(message, onConfirm, onCancel = null) {
            document.getElementById('confirmationMessage').textContent = message;
            document.getElementById('confirmationModal').classList.add('active');
            
            document.getElementById('confirmYes').onclick = () => {
                closeModal('confirmationModal');
                if (onConfirm) onConfirm();
            };
            
            document.getElementById('confirmNo').onclick = () => {
                closeModal('confirmationModal');
                if (onCancel) onCancel();
            };
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                const modalId = e.target.id;
                closeModal(modalId);
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Close any open modal
                const openModal = document.querySelector('.modal.active');
                if (openModal) {
                    closeModal(openModal.id);
                }
            }
        });

        // Auto-save user data
        function saveUserData() {
            if (currentUser) {
                const userData = {
                    ...currentUser,
                    credits: userCredits,
                    sessions: bookedSessions,
                    teaching: teachingSessions,
                    lastActive: new Date().toISOString()
                };
                localStorage.setItem('skillhive_user', JSON.stringify(userData));
            }
        }

        // Save data periodically
        setInterval(saveUserData, 30000); // Save every 30 seconds

        // Save data before page unload
        window.addEventListener('beforeunload', saveUserData);

        // Load saved data on startup
        function loadSavedData() {
            const savedUser = localStorage.getItem('skillhive_user');
            if (savedUser) {
                const userData = JSON.parse(savedUser);
                currentUser = userData;
                userCredits = userData.credits || 0;
                bookedSessions = userData.sessions || [];
                teachingSessions = userData.teaching || [];
            }
        }

        // Initialize saved data
        loadSavedData();

        // Search functionality
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Add debounced search
        if (document.getElementById('skillSearch')) {
            document.getElementById('skillSearch').addEventListener('keyup', debounce(filterSkills, 300));
        }

        // Progressive Web App features
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Handle online/offline status
        window.addEventListener('online', () => {
            showNotification('You are back online!', 'success');
        });

        window.addEventListener('offline', () => {
            showNotification('You are offline. Some features may not work.', 'warning');
        });

        // Theme management (optional feature)
        function toggleTheme() {
            const body = document.body;
            const isDark = body.classList.contains('dark-theme');
            
            if (isDark) {
                body.classList.remove('dark-theme');
                localStorage.setItem('skillhive-theme', 'light');
            } else {
                body.classList.add('dark-theme');
                localStorage.setItem('skillhive-theme', 'dark');
            }
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('skillhive-theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-theme');
        }

        // Accessibility improvements
        function handleKeyNavigation(e) {
            if (e.key === 'Tab') {
                document.body.classList.add('keyboard-navigation');
            }
        }

        function handleMouseNavigation() {
            document.body.classList.remove('keyboard-navigation');
        }

        document.addEventListener('keydown', handleKeyNavigation);
        document.addEventListener('mousedown', handleMouseNavigation);

        // Analytics tracking (would connect to real analytics in production)
        function trackEvent(category, action, label = null) {
            console.log('Analytics Event:', { category, action, label });
            // In production: gtag('event', action, { event_category: category, event_label: label });
        }

        // Track user interactions
        function trackSkillView(skillId) {
            trackEvent('Skills', 'View', skillId);
        }

        function trackBooking(skillId) {
            trackEvent('Booking', 'Complete', skillId);
        }

        function trackPayment(amount) {
            trackEvent('Payment', 'Complete', amount);
        }

        // Performance monitoring
        function measurePerformance(name, fn) {
            const start = performance.now();
            const result = fn();
            const end = performance.now();
            console.log(`${name} took ${end - start} milliseconds`);
            return result;
        }

        // Error boundary for JavaScript errors
        window.addEventListener('error', function(e) {
            console.error('JavaScript error:', e.error);
            showNotification('Something went wrong. Please refresh the page.', 'error');
        });

        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
            showNotification('A network error occurred. Please try again.', 'error');
        });

        // Add CSS animations for better UX
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { opacity: 0; transform: translateX(100%); }
                to { opacity: 1; transform: translateX(0); }
            }
            
            @keyframes slideOut {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(100%); }
            }
            
            .keyboard-navigation *:focus {
                outline: 2px solid var(--primary-blue) !important;
                outline-offset: 2px;
            }
            
            .dark-theme {
                filter: invert(1) hue-rotate(180deg);
            }
            
            .dark-theme img,
            .dark-theme video,
            .dark-theme iframe {
                filter: invert(1) hue-rotate(180deg);
            }
            
            @media (prefers-reduced-motion: reduce) {
                *, *::before, *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }
        `;
        document.head.appendChild(style);

        console.log('SkillHive Enhanced - Application loaded successfully!');
    </script>
</body>
</html>
